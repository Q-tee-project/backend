# ✏️ **채점 결과 수정 기능 완전 가이드**

## 🎯 **채점 결과 수정에서 할 수 있는 모든 것**

### 📋 **1. 접근 방법**
1. **채점 결과 탭** 이동
2. **"📊 상세보기 / 수정"** 버튼 클릭
3. **"✏️ 채점 수정 모드"** 버튼 클릭하여 편집 모드 활성화

---

## 🔧 **수정 가능한 항목들**

### **1. 📊 문제별 점수 수정**
- **기능**: 각 문제의 획득 점수를 개별적으로 수정
- **방법**: 점수 입력 필드에서 직접 숫자 입력
- **제한**: 0점 ~ 해당 문제 만점 사이
- **실시간 효과**: 
  - 총점 자동 재계산
  - 정답률(%) 자동 업데이트
  - 60% 이상 획득시 정답으로 표시

```javascript
// 점수 수정 로직
updateQuestionScore(questionId, newScore, maxScore) {
    const score = Math.max(0, Math.min(parseInt(newScore) || 0, maxScore));
    questionResult.score = score;
    questionResult.is_correct = score >= Math.ceil(maxScore * 0.6); // 60% 이상 정답
    // 총점 재계산 및 UI 업데이트
}
```

### **2. 🤖 AI 피드백 수정 및 추가**
- **AI 채점 문제**: 기존 AI 피드백 수정 가능
- **모든 문제**: 새로운 피드백 추가 가능
- **실시간 저장**: `onblur` 이벤트로 즉시 메모리에 저장

```javascript
// 피드백 수정 UI
${this.gradingEditMode ? `
    <textarea class="feedback-input" 
              data-question-id="${question.question_id}"
              placeholder="AI 피드백을 수정하세요..."
              onblur="window.worksheetEditor.updateQuestionFeedback('${question.question_id}', this.value)"
    >${aiFeedback}</textarea>
` : `
    <div class="feedback-text">${aiFeedback}</div>
`}
```

### **3. 💾 일괄 저장 기능**
- **버튼**: "💾 채점 수정사항 저장"
- **저장 내용**:
  - 모든 문제의 수정된 점수
  - 모든 문제의 수정된 피드백
  - 검수자 정보 ("교사")
- **API 호출**: `reviewGrading` 엔드포인트 사용

```javascript
// 저장 데이터 구조
const questionReviews = {
    "1": { score: 8, feedback: "수정된 피드백" },
    "2": { score: 10, feedback: "잘했습니다" },
    // ...
};

await ApiService.reviewGrading(result_id, {
    question_results: questionReviews,
    reviewed_by: "교사"
});
```

---

## 🎨 **시각적 피드백**

### **편집 모드 vs 보기 모드**
```javascript
// 편집 모드 (점수 입력 필드)
<input type="number" value="8" min="0" max="10" onchange="...">

// 보기 모드 (점수 표시)
8 / 10점 ✅
```

### **점수별 색상 표시**
- **정답 문제**: 초록색 테두리 + ✅
- **오답 문제**: 빨간색 테두리 + ❌
- **부분 점수**: 60% 이상시 정답으로 간주

### **실시간 업데이트**
- **개별 점수 변경** → **총점 즉시 재계산**
- **정답률 자동 업데이트** → **헤더 점수 정보 갱신**

---

## 🔄 **수정 프로세스**

### **1. 편집 모드 진입**
```
📖 보기 모드 → ✏️ 채점 수정 모드
```

### **2. 수정 작업**
- **점수 조정**: 숫자 입력 필드에서 점수 변경
- **피드백 편집**: 텍스트 영역에서 피드백 수정/추가
- **실시간 미리보기**: 변경사항 즉시 반영

### **3. 저장**
```
💾 채점 수정사항 저장 → API 호출 → 성공 메시지
```

### **4. 완료**
```
✏️ 채점 수정 모드 → 📖 보기 모드 (자동 전환)
```

---

## 📊 **수정 가능한 데이터 예시**

### **객관식 문제**
```
[편집 모드]
문제 1: be 동사 선택
학생 답안: ① am (틀림)
정답: ② is
점수: [8] / 10점  ← 수정 가능
피드백: [잘못된 선택이지만 동사 개념은 이해함] ← 추가/수정 가능
```

### **서술형 문제 (AI 채점)**
```
[편집 모드]  
문제 9: 주말 활동 서술
학생 답안: "asfsa"
정답: "I listen to peaceful music to relax on weekends."
점수: [3] / 10점  ← 수정 가능
AI 피드백: [답안이 의미 있는 단어나 문장으로 구성되어 있지 않아...] ← 수정 가능
```

---

## 🎯 **활용 시나리오**

### **1. 부분 점수 부여**
- AI가 0점 처리한 서술형 답안에 부분 점수 부여
- 창의적 답안에 대한 추가 점수 부여

### **2. 피드백 개선**
- AI 피드백이 부적절한 경우 교사가 직접 수정
- 학생별 맞춤형 피드백 추가

### **3. 채점 오류 수정**
- 시스템 오류로 잘못 채점된 경우 수정
- 문제 해석의 차이로 인한 점수 조정

### **4. 교육적 피드백 강화**
- 단순한 정오답 표시를 넘어서는 상세한 피드백 제공
- 학습 방향 제시 및 격려 메시지 추가

---

## 🚀 **기능 요약**

| 기능 | 설명 | 실시간 반영 | 저장 방식 |
|------|------|-------------|-----------|
| **점수 수정** | 0~만점 사이 점수 조정 | ✅ 즉시 | 일괄 저장 |
| **피드백 수정** | AI/교사 피드백 편집 | ✅ 즉시 | 일괄 저장 |
| **총점 계산** | 개별 점수 합계 자동 계산 | ✅ 자동 | - |
| **정답률 계산** | 총점 기반 % 자동 계산 | ✅ 자동 | - |
| **정답 표시** | 60% 이상시 정답 표시 | ✅ 자동 | - |

---

## 🎉 **최종 결과**

**채점 결과 수정 기능을 통해 교사는:**
- ✅ **유연한 채점**: AI 한계를 보완하는 인간 판단
- ✅ **개인화된 피드백**: 학생별 맞춤 지도
- ✅ **교육적 효과**: 단순 점수를 넘어선 학습 지원
- ✅ **효율적 관리**: 실시간 수정과 일괄 저장

**이제 채점 결과에서 점수와 피드백을 완벽하게 수정할 수 있습니다!** 🎯
